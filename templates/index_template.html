{% extends "base_template.html" %}

{% block title %}
    Postingan Blog Saya {% if current_page > 1 %}- Halaman {{ current_page }}{% endif %}
{% endblock %}

{% block content %}
    <h1>Postingan Terbaru dari Blog Saya</h1>

    {% if posts %}
        {% for post in posts %}
        <div class="post-container">
            {% if post.thumbnail_url %}
            <div class="post-thumbnail">
                <img src="{{ post.thumbnail_url }}" alt="{{ post.title }} thumbnail">
            </div>
            {% endif %}
            <div class="post-content-wrapper">
                <h2><a href="{{ post.detail_url }}">{{ post.title }}</a></h2>
                <div class="post-meta">
                    Dipublikasikan: {{ post.published }}
                </div>
                <div class="post-excerpt">
                    {{ post.parsed_content | safe }}
                </div>
                <p><a href="{{ post.detail_url }}">Baca Selengkapnya</a></p>
            </div>
        </div>
        {% endfor %}

        {# --- BAGIAN NAVIGASI PAGINASI --- #}
        <div class="pagination">
            {% if prev_page_url %}
                <a href="{{ prev_page_url }}">Previous</a>
            {% else %}
                <span>Previous</span>
            {% endif %}

            {% for p in range(1, total_pages + 1) %}
                {% if p == current_page %}
                    <span>{{ p }}</span>
                {% elif p == 1 %}
                    <a href="/">1</a> {# Halaman 1 selalu ke root #}
                {% else %}
                    <a href="/pages/{{ p }}.html">{{ p }}</a>
                {% endif %}
            {% endfor %}

            {% if next_page_url %}
                <a href="{{ next_page_url }}">Next</a>
            {% else %}
                <span>Next</span>
            {% endif %}
        </div>
        {# --- AKHIR BAGIAN NAVIGASI PAGINASI --- #}

    {% else %}
        <p>Tidak ada postingan yang ditemukan.</p>
    {% endif %}
{% endblock %}
